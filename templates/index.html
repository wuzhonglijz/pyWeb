<!DOCTYPE html>
<!-- <link rel="stylesheet" href="//fonts.lug.ustc.edu.cn/css?family=Roboto:300,300italic,700,700italic"> -->
<link href="https://cdn.bootcss.com/normalize/8.0.0/normalize.min.css" rel="stylesheet">
<link href="https://cdn.bootcss.com/milligram/1.3.0/milligram.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery.serializeJSON/2.9.0/jquery.serializejson.min.js"></script>

<html lang="zh">
<head>
    <meta charset="UTF-8">
    <!-- 包含头部信息用于适应不同设备 -->
    <!--<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">-->
    <title>安徽科技学院自助填表系统</title>
    <style>
        .flex-center{
        display: flex;
        justify-content: space-around;
        }
    </style>

</head>
<body>
<br/>
<h1 style="font-family:Microsoft Yahei;text-align:center;">安徽科技学院自助填表系统</h1>
<blockquote style="font-family:Microsoft Yahei;text-align:center;"><em>一个自助式、协作式的班级报表填写系统 --wzl</em></blockquote>

<div class="container">
    <form id="fm">
        <div class="row">
            <div class="column">
                <label for="name">姓名</label>
                <input type="text" placeholder="你的名字" id="name" name="name"/>
            </div>

            <div class="column">
                <label for="phone">联系方式</label>
                <input type="text" placeholder="你的手机号" id="phone" name="phone"/>
            </div>

        </div>
        <div class="row">
            <div class="column">
                <label for="go">离校日期</label>
                <input type="text" placeholder="如:10-11" id="go" name="go"/>
            </div>
            <div class="column">
                <label for="back">返校日期</label>
                <input type="text" placeholder="如:10-12" id="back" name="back"/>
            </div>

        </div>
        <div class="row">
            <div class="column">
                <label for="where">去向</label>
                <input type="text" placeholder="世界那么大,你要去哪儿？" id="where" name="where"/>
            </div>
        </div>
    </form>
</div>     <!-- 这里是信息输入部分 -->


<div class="row flex-center"><label id="alert"></label></div>

<div class="row flex-center">
    <input id="submit" class="button-large" type="button" value="提交" onclick="send();"/>
    <input class="button-large button-outline" type="reset" value="清空" onclick="reset();"/>
</div>

<div class="container">
    <table>
        <thead>
        <tr>
            <th>序号</th>
            <th>姓名</th>
            <th>去向登记</th>
            <th>离校日期</th>
            <th>返校日期</th>
            <th>联系方式</th>
        </tr>
        </thead>
        <tbody>
        {% for row in data%}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ row.name }}</td>
            <td>{{ row.where }}</td>
            <td>{{ row.go}}</td>
            <td>{{ row.back }}</td>
            <td>{{ row.phone }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

</body>

<script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>

<script type="text/javascript">
    function send()
    {

        var json_data = JSON.stringify($('#fm').serializeJSON());
        console.log(json_data);

        instance = axios.create({
          headers: {'Content-Type': 'application/json'}
        });
        instance.post('/submit', json_data).then(function(response){
            if (response.data == '')
                location.reload();
            else
                $("#alert").html(response.data);
        }).catch(function (error) {
            $("#alert").html("你已经填过表了, 请不要重复提交哦");
         });
    }

    function reset()
    {
        $('#fm')[0].reset();
    }

</script>
</html>
